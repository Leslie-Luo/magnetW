<template>
  <div class="header">
    <div class="header-left">
      <header-version></header-version>
    </div>
    <div class="header-center">
      <slot></slot>
    </div>
    <div class="header-right">
      <el-menu mode="horizontal" :default-active="defaultActive" v-if="project.menu">
        <template v-for="menuItem in project.menu">
          <el-submenu v-if="menuItem.submenu" :index="menuItem.index" popper-class="header-submenu">
            <browser-link slot="title" :href="menuItem.link" :underline="false">{{menuItem.text}}
            </browser-link>
            <el-menu-item v-for="subItem in menuItem.submenu">
              <browser-link :href="subItem.link" :underline="false">{{subItem.text}}</browser-link>
            </el-menu-item>
          </el-submenu>
          <el-menu-item v-else :index="menuItem.index">
            <browser-link :href="menuItem.link" :underline="false">{{menuItem.text}}</browser-link>
          </el-menu-item>
        </template>
      </el-menu>
    </div>
  </div>
</template>

<script>
  import HeaderVersion from './HeaderVersion'
  import BrowserLink from './BrowserLink'

  export default {
    components: {
      BrowserLink,
      HeaderVersion
    },
    data () {
      return {
        defaultActive: null
      }
    },
    created () {
      const menus = this.project.menu
      if (menus && menus.length > 0) {
        this.defaultActive = menus[0].index
      }
    }
  }
</script>

<style lang="scss" scoped>
  .header {
    display: flex;

    .header-right, .el-menu, .el-menu .el-submenu, /deep/ .el-menu .el-submenu__title, .el-menu .el-link {
      height: 100%;
    }

    .header-right {
      margin-left: auto;
    }

    .el-menu {
      background-color: transparent;
      border: none !important;
    }

    .header-left {
      display: flex;
    }

    .header-center {
      flex: 1;
      display: flex;
      align-items: center;
      margin: 0 150px;

      .pager-header-input {
        width: 100%;
      }
    }
  }

</style>
